<!doctype html><html lang=en dir=ltr><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Sync Conflicts# Overview# Sync conflicts occur when the same file is modified on both your local machine and inside the container simultaneously. Alcatraz detects these conflicts automatically and provides tools to resolve them.
Detection# Conflict detection runs automatically in the background. Results are cached in .alca/sync-conflicts-cache.json within your project directory using a stale-while-revalidate (SWR) pattern:
Stale read: Commands like alca up, alca run, and alca down read from the cache for instant display, then refresh the cache asynchronously in the background. Fresh read: alca status and alca experimental sync check perform a synchronous fresh check. The .alca/ directory is auto-created when needed and should be added to .gitignore.
"><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:url" content="https://bolasblack.github.io/alcatraz/sync-conflicts/"><meta property="og:site_name" content="Alcatraz"><meta property="og:title" content="Sync Conflicts"><meta property="og:description" content="Sync Conflicts# Overview# Sync conflicts occur when the same file is modified on both your local machine and inside the container simultaneously. Alcatraz detects these conflicts automatically and provides tools to resolve them.
Detection# Conflict detection runs automatically in the background. Results are cached in .alca/sync-conflicts-cache.json within your project directory using a stale-while-revalidate (SWR) pattern:
Stale read: Commands like alca up, alca run, and alca down read from the cache for instant display, then refresh the cache asynchronously in the background. Fresh read: alca status and alca experimental sync check perform a synchronous fresh check. The .alca/ directory is auto-created when needed and should be added to .gitignore."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:modified_time" content="2026-02-14T20:20:38+00:00"><meta itemprop=name content="Sync Conflicts"><meta itemprop=description content="Sync Conflicts# Overview# Sync conflicts occur when the same file is modified on both your local machine and inside the container simultaneously. Alcatraz detects these conflicts automatically and provides tools to resolve them.
Detection# Conflict detection runs automatically in the background. Results are cached in .alca/sync-conflicts-cache.json within your project directory using a stale-while-revalidate (SWR) pattern:
Stale read: Commands like alca up, alca run, and alca down read from the cache for instant display, then refresh the cache asynchronously in the background. Fresh read: alca status and alca experimental sync check perform a synchronous fresh check. The .alca/ directory is auto-created when needed and should be added to .gitignore."><meta itemprop=dateModified content="2026-02-14T20:20:38+00:00"><meta itemprop=wordCount content="539"><title>Sync Conflicts | Alcatraz</title><link rel=icon href=/alcatraz/favicon.png><link rel=manifest href=/alcatraz/manifest.json><link rel=canonical href=https://bolasblack.github.io/alcatraz/sync-conflicts/><link rel=stylesheet href=/alcatraz/book.min.e61afb4afdceff9939c266b263897a4a31d9a9e94045925e6d1774fe776b6a6d.css integrity="sha256-5hr7Sv3O/5k5wmayY4l6SjHZqelARZJebRd0/ndram0=" crossorigin=anonymous><script defer src=/alcatraz/fuse.min.js></script><script defer src=/alcatraz/en.search.min.0d01f456de3f2ac051ab93c5a9759ad77f025883af60966430d8c5e67dad6fa9.js integrity="sha256-DQH0Vt4/KsBRq5PFqXWa138CWIOvYJZkMNjF5n2tb6k=" crossorigin=anonymous></script></head><body dir=ltr class="book-kind-page book-type-page"><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/alcatraz/><span>Alcatraz</span></a></h2><div class="book-search hidden"><input id=book-search-input type=text placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><script>document.querySelector(".book-search").classList.remove("hidden")</script><ul><li><a href=/alcatraz/quickstart/>Quickstart</a></li><li><input type=checkbox id=section-574f9361c1a9cdabce6f05eeb167dbcc class=toggle>
<label for=section-574f9361c1a9cdabce6f05eeb167dbcc class=flex><a href=/alcatraz/config/>Configuration</a>
<img src=/alcatraz/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/alcatraz/config/extends-includes/>Extends & Includes</a></li><li><a href=/alcatraz/config/fields/>Field Reference</a></li><li><a href=/alcatraz/config/network/>Network Configuration</a></li></ul></li><li><a href=/alcatraz/runtimes/>Runtimes</a></li><li><a href=/alcatraz/sync-conflicts/ class=active>Sync Conflicts</a></li><li><input type=checkbox id=section-598a1865d4bd87c7fa2da993de5e0d3e class=toggle>
<label for=section-598a1865d4bd87c7fa2da993de5e0d3e class=flex><a role=button>Command Reference</a>
<img src=/alcatraz/icons/chevron-right.svg class=book-icon alt=Expand></label><ul><li><a href=/alcatraz/commands/alca/>alca</a></li><li><a href=/alcatraz/commands/alca_cleanup/>alca cleanup</a></li><li><a href=/alcatraz/commands/alca_down/>alca down</a></li><li><a href=/alcatraz/commands/alca_experimental/>alca experimental</a></li><li><a href=/alcatraz/commands/alca_experimental_reload/>alca experimental reload</a></li><li><a href=/alcatraz/commands/alca_experimental_sync/>alca experimental sync</a></li><li><a href=/alcatraz/commands/alca_experimental_sync_check/>alca experimental sync check</a></li><li><a href=/alcatraz/commands/alca_experimental_sync_resolve/>alca experimental sync resolve</a></li><li><a href=/alcatraz/commands/alca_init/>alca init</a></li><li><a href=/alcatraz/commands/alca_list/>alca list</a></li><li><a href=/alcatraz/commands/alca_network-helper/>alca network-helper</a></li><li><a href=/alcatraz/commands/alca_network-helper_install/>alca network-helper install</a></li><li><a href=/alcatraz/commands/alca_network-helper_status/>alca network-helper status</a></li><li><a href=/alcatraz/commands/alca_network-helper_uninstall/>alca network-helper uninstall</a></li><li><a href=/alcatraz/commands/alca_run/>alca run</a></li><li><a href=/alcatraz/commands/alca_status/>alca status</a></li><li><a href=/alcatraz/commands/alca_up/>alca up</a></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class="book-header hidden"><div class="flex align-center justify-between"><label for=menu-control><img src=/alcatraz/icons/menu.svg class=book-icon alt=Menu></label><h3>Sync Conflicts</h3><label for=toc-control><img src=/alcatraz/icons/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class=hidden><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#detection>Detection</a></li><li><a href=#notification>Notification</a></li><li><a href=#resolution>Resolution</a><ul><li><a href=#interactive-resolution>Interactive Resolution</a></li><li><a href=#machine-readable-check>Machine-Readable Check</a></li></ul></li><li><a href=#related-commands>Related Commands</a></li></ul></nav></aside></header><article class="markdown book-article"><h1 id=sync-conflicts>Sync Conflicts<a class=anchor href=#sync-conflicts>#</a></h1><h2 id=overview>Overview<a class=anchor href=#overview>#</a></h2><p>Sync conflicts occur when the same file is modified on both your local machine and inside the container simultaneously. Alcatraz detects these conflicts automatically and provides tools to resolve them.</p><h2 id=detection>Detection<a class=anchor href=#detection>#</a></h2><p>Conflict detection runs automatically in the background. Results are cached in <code>.alca/sync-conflicts-cache.json</code> within your project directory using a stale-while-revalidate (SWR) pattern:</p><ul><li><strong>Stale read</strong>: Commands like <code>alca up</code>, <code>alca run</code>, and <code>alca down</code> read from the cache for instant display, then refresh the cache asynchronously in the background.</li><li><strong>Fresh read</strong>: <code>alca status</code> and <code>alca experimental sync check</code> perform a synchronous fresh check.</li></ul><p>The <code>.alca/</code> directory is auto-created when needed and should be added to <code>.gitignore</code>.</p><h2 id=notification>Notification<a class=anchor href=#notification>#</a></h2><p>When sync conflicts exist, a warning banner is displayed:</p><ul><li><strong><code>alca up</code>, <code>alca run</code>, <code>alca down</code></strong>: Banner is shown on stderr (does not interfere with command output)</li><li><strong><code>alca status</code></strong>: Conflict banner is shown on stderr after the status display</li></ul><p>If conflict detection fails (e.g., mutagen daemon not running), a warning is printed to stderr instead of failing silently.</p><p>The banner shows up to 3 conflicting file paths with descriptions of each side&rsquo;s state (e.g., &ldquo;modified locally, deleted in container&rdquo;), plus a count of additional conflicts if more than 3 exist.</p><h2 id=resolution>Resolution<a class=anchor href=#resolution>#</a></h2><h3 id=interactive-resolution>Interactive Resolution<a class=anchor href=#interactive-resolution>#</a></h3><p>Use <code>alca experimental sync resolve</code> to walk through conflicts one by one:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>$ alca experimental sync resolve
</span></span><span style=display:flex><span>2 sync conflicts found:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[1/2] src/main.go
</span></span><span style=display:flex><span>  Local (your machine):  modified
</span></span><span style=display:flex><span>  Container:             modified
</span></span><span style=display:flex><span>? How to resolve?
</span></span><span style=display:flex><span>  &gt; Local overwrites container
</span></span><span style=display:flex><span>    Container overwrites local
</span></span><span style=display:flex><span>    Skip</span></span></code></pre></div><p>For each conflict, choose one of:</p><ul><li><strong>Local overwrites container</strong> — Your local file replaces the container version</li><li><strong>Container overwrites local</strong> — The container file replaces your local version</li><li><strong>Skip</strong> — Leave the conflict unresolved</li></ul><p>The container must be running for resolution to work.</p><h3 id=machine-readable-check>Machine-Readable Check<a class=anchor href=#machine-readable-check>#</a></h3><p>Use <code>alca experimental sync check</code> for scripting:</p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#00a8c8>if</span> ! alca experimental sync check<span style=color:#111>;</span> <span style=color:#00a8c8>then</span>
</span></span><span style=display:flex><span>    <span style=color:#111>echo</span> <span style=color:#d88200>&#34;Sync conflicts detected&#34;</span>
</span></span><span style=display:flex><span>    alca experimental sync resolve
</span></span><span style=display:flex><span><span style=color:#00a8c8>fi</span></span></span></code></pre></div><p>Exit codes: 0 = no conflicts, 1 = conflicts found.</p><h4 id=custom-output-with---template>Custom Output with <code>--template</code><a class=anchor href=#custom-output-with---template>#</a></h4><p>The <code>--template</code> flag accepts a Go <a href=https://pkg.go.dev/text/template><code>text/template</code></a> string, giving you full control over the output format.</p><p><strong>Template data:</strong></p><p>The root object has the following fields:</p><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>.Count</code></td><td><code>int</code></td><td>Number of conflicts</td></tr><tr><td><code>.Conflicts</code></td><td><code>[]ConflictInfo</code></td><td>List of conflict details</td></tr></tbody></table><p>Each <code>ConflictInfo</code> in <code>.Conflicts</code> has:</p><table><thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>.Path</code></td><td><code>string</code></td><td>Relative file path from project root</td></tr><tr><td><code>.LocalState</code></td><td><code>string</code></td><td>State on your machine: <code>modified</code>, <code>created</code>, <code>deleted</code>, <code>directory</code></td></tr><tr><td><code>.ContainerState</code></td><td><code>string</code></td><td>State in the container: <code>modified</code>, <code>created</code>, <code>deleted</code>, <code>directory</code></td></tr><tr><td><code>.DetectedAt</code></td><td><code>time.Time</code></td><td>When the conflict was first detected</td></tr></tbody></table><p>A built-in <code>json</code> helper function is available for JSON serialization.</p><p><strong>Examples:</strong></p><div class=highlight><pre tabindex=0 style=color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># JSON output (for parsing by other tools)</span>
</span></span><span style=display:flex><span>alca experimental sync check --template<span style=color:#f92672>=</span><span style=color:#d88200>&#39;{{ json . }}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Count only</span>
</span></span><span style=display:flex><span>alca experimental sync check --template<span style=color:#f92672>=</span><span style=color:#d88200>&#39;{{ .Count }} conflicts&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># List conflicting paths, one per line</span>
</span></span><span style=display:flex><span>alca experimental sync check --template<span style=color:#f92672>=</span><span style=color:#d88200>&#39;{{ range .Conflicts }}{{ .Path }}{{ &#34;\n&#34; }}{{ end }}&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Show path and state details</span>
</span></span><span style=display:flex><span>alca experimental sync check --template<span style=color:#f92672>=</span><span style=color:#d88200>&#39;{{ range .Conflicts }}{{ .Path }}: {{ .LocalState }} vs {{ .ContainerState }}{{ &#34;\n&#34; }}{{ end }}&#39;</span></span></span></code></pre></div><p>When <code>--template</code> is used, the template output is written to stdout. Exit codes remain the same (0 = no conflicts, 1 = conflicts found).</p><h2 id=related-commands>Related Commands<a class=anchor href=#related-commands>#</a></h2><ul><li><a href=./commands/alca_status.md><code>alca status</code></a> — Shows sync conflict information</li><li><a href=./commands/alca_experimental_sync_check.md><code>alca experimental sync check</code></a> — Machine-readable conflict check</li><li><a href=./commands/alca_experimental_sync_resolve.md><code>alca experimental sync resolve</code></a> — Interactive conflict resolution</li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div></div><div></div></div><div class="flex flex-wrap justify-between"><span><a href=/alcatraz/runtimes/ class="flex align-center"><img src=/alcatraz/icons/backward.svg class=book-icon alt=Backward>
<span>Runtimes</span>
</a></span><span><a href=/alcatraz/commands/alca/ class="flex align-center"><span>alca</span>
<img src=/alcatraz/icons/forward.svg class=book-icon alt=Forward></a></span></div><div class=book-comments></div><script>(function(){document.querySelectorAll("pre:has(code)").forEach(e=>{e.addEventListener("click",e.focus),e.addEventListener("copy",function(t){if(t.preventDefault(),navigator.clipboard){const t=window.getSelection().toString()||e.textContent;navigator.clipboard.writeText(t)}})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#detection>Detection</a></li><li><a href=#notification>Notification</a></li><li><a href=#resolution>Resolution</a><ul><li><a href=#interactive-resolution>Interactive Resolution</a></li><li><a href=#machine-readable-check>Machine-Readable Check</a></li></ul></li><li><a href=#related-commands>Related Commands</a></li></ul></nav></div></aside></main><script defer src=/alcatraz/code-copy.min.js></script></body></html>