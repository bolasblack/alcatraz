# fslint configuration
# This linter detects direct filesystem operations in specified packages.

# Directories to scan for packages.
# Only packages under these directories will be checked.
scan_dirs = ["internal/"]

# Package paths that are allowed to use filesystem operations directly.
# These packages and their subpackages will be skipped during linting.
allowed_packages = ["internal/transact"]

# Forbidden function calls by package.
# Format: { "package_path" = ["function1", "function2", ...] }
[forbidden_calls]
"os" = [
    # File creation/opening
    "Create",
    "CreateTemp",
    "Open",
    "OpenFile",
    "OpenInRoot",
    "OpenRoot",
    # Directory operations
    "Mkdir",
    "MkdirAll",
    "MkdirTemp",
    "Chdir",
    "ReadDir",
    # File read/write
    "ReadFile",
    "WriteFile",
    "Truncate",
    # File metadata
    "Stat",
    "Lstat",
    "Chmod",
    "Chown",
    "Lchown",
    "Chtimes",
    "Rename",
    # File deletion
    "Remove",
    "RemoveAll",
    # Symbolic/hard links
    "Symlink",
    "Readlink",
    "Link",
    # Filesystem utilities
    "DirFS",
    "CopyFS",
]

"io/ioutil" = [
    "ReadFile",
    "WriteFile",
    "ReadDir",
    "TempFile",
    "TempDir",
]

# Command execution - use CommandRunner interface for testability
"os/exec" = [
    "Command",
    "CommandContext",
]
